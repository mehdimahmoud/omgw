machine:
  timezone:
    Europe/London
  java:
    version: oraclejdk8
  environment:
    TERM: dumb

dependencies:
  cache_directories:
    - ~/.gradle
  override:
    - chmod +x gradlew
    - ./gradlew resolveAllDependencies

test:
  override:
    - ./gradlew test
  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - find . -type f -regex ".*/build/test-results/TEST-.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;

## Customize deployment commands
deployment:
  staging:
    branch: master
    heroku:
      appname: moviesroom